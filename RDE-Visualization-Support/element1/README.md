# Element 1 - Transportation System Characteristics

## Getting the Data
Head to [the RDE](https://www.its-rde.net/) and make an account. Then navigate to [the Pasadena data environment](https://www.its-rde.net/data/showds?dataEnvironmentNumber=10006) and download the following datasets:

 - 05i Simulated Link Volumes (Plain text format)
   * Simulated\_Link\_Volumes\_text\_10/01.zip
 - 06d Link Speed (Plain text format)
   * LinkSpeed\_Text\_2011/10/01.zip

Once all the files have been downloaded, extract the files from the zips/folders that the RDE packages them in.  Then place only the zips into this directory. **NOTE: When you extract and move the zips from the rdedownload any file name that contains "/" above will be replaced by "_" Do not change the file names.**

The other main component of the source data is `highway_links_manual.geojson`, a [GeoJSON](geojson.org) file generated by taking a subset of the original Pasadena links shapefile in the [01 Network Definition data set](https://www.its-rde.net/data/showdf?dataSetNumber=10053).  To run the spatial query used to take the subset and export the shapefile to GeoJSON, we used [QGIS](http://qgis.org), following these approximate steps (note that the resulting file is included in the repo, so there's no need to do this unless you'd like to generate a GeoJSON file for a different area):

1. Open the road network shapefile in QGIS.
2. Delete any unused fields using the "Fields" menu in the layer properties for the shapefile.
3. Create a new temporary scratch layer and add a new feature -- draw a square covering the area of interest (in this case, the large I-210 interchange near Old Pasadena).
4. Install the Spatial Query plugin.
5. Open the Spatial Query Menu: Vector -> Spatial Query -> Spatial Query.
6. Select source features from the road network shapefile, where the feature is within reference features of your temporary scratch layer.  Click "Apply", and this will create a new selection.  Note that you can add/remove links to/from the selection manually at this point -- we did this for a couple of links that weren't attached to the main highway network of interest.
7. Right click the road network layer, and click "Save as...".  Set the format as GeoJSON, make sure the CRS is EPSG:4326 (for standard latitude/longitude), and check "Save only selected features".  You may want to lower the COORDINATE_PRECISION to something more reasonable (we used 5).  Click "OK", and the GeoJSON file will be exported.

## Running the Scripts

The script to generate the data is a bash script, which should run without a problem on Linux or OS X;  Windows users will need to provide a POSIX-like environment by installing something like [Cygwin](https://www.cygwin.com/).

Run `./load_data.sh`.  This will populate the `data/` directory with subsetted and cleaned data for the visualization.